<?xml version="1.0" encoding="UTF-8"?>
<tns:root xmlns:tns="http://www.example.org/zbx_template_new/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.example.org/zbx_template_new/ ../../src/main/resources/templates/metrics.xsd">
  <template>
  <!-- http://www.brocade.com/en/products-services/switches/campus-network-switches/icx-6610-switch.html  -->
	  <classes>
	  	<class>Performance</class>
	  	<class>Fault</class>
	  	
	  	<class>Network</class>
        <class>SNMP Device</class>
	  	<class>SNMPv1</class>
	  	<class>SNMPv2</class>        
	  </classes>
	  <name>Template Brocade ICX</name>
	  <description>Template Brocade ICX</description>
	  <sysObjectID>xxx</sysObjectID>
	  <discoveryRules>

		
  	  	<discoveryRule>
				<name>PSU Discovery</name>
                <snmp_oid>discovery[{#SNMPVALUE},.1.3.6.1.4.1.1991.1.1.1.2.2.1.3]</snmp_oid>
                <key>psu.discovery</key>
                <description>snChasPwrSupply2Description: The index to power supply table snChasPwrSupply2Table</description>              
		</discoveryRule>		
 
  	  	<discoveryRule>
				<name>FAN Discovery</name>
                <snmp_oid>discovery[{#SNMPVALUE},.1.3.6.1.4.1.1991.1.1.1.3.2.1.3]</snmp_oid>
                <key>fan.discovery</key>
                <description>snChasFan2Description: The index to fan table. snChasFan2Table</description> 
		</discoveryRule>
		
	  </discoveryRules>
	  <metrics>
	    <system.cpu.util>
	      <oid>1.3.6.1.4.1.1991.1.1.2.1.52.0</oid>
	      <snmpObject>snAgGblCpuUtil1MinAvg.0</snmpObject>
	      <mib>FOUNDRY-SN-AGENT-MIB</mib>
	      <vendorDescription>The statistics collection of 1 minute CPU utilization.</vendorDescription>
	    </system.cpu.util>
 

	    <vm.memory.pused>
			<oid>1.3.6.1.4.1.1991.1.1.2.1.53.0</oid>
	        <snmpObject>snAgGblDynMemUtil.0</snmpObject>
	        <mib>FOUNDRY-SN-AGENT-MIB</mib>
	        <vendorDescription>The system dynamic memory utilization, in unit of percentage.
	        Deprecated: Refer to snAgSystemDRAMUtil.
	        For NI platforms, refer to snAgentBrdMemoryUtil100thPercent
	        </vendorDescription>	    	  
	    </vm.memory.pused>
	    

   		<sensor.temp.value>
	    	  <oid>1.3.6.1.4.1.1991.1.1.1.1.18.0</oid>
		      <snmpObject>snChasActualTemperature.0</snmpObject>
		      <mib>FOUNDRY-SN-AGENT-MIB</mib>
		      <vendorDescription>Temperature of the chassis. Each unit is 0.5 degrees Celcius.
		      Only management module built with temperature sensor hardware is applicable.
		       For those non-applicable management module, it returns no-such-name.</vendorDescription>
	    </sensor.temp.value>
	    

	    
	    <sensor.psu.status>
	    	  <oid>.1.3.6.1.4.1.1991.1.1.1.2.2.1.4.{#SNMPINDEX}</oid>
		      <snmpObject>snChasPwrSupply2OperStatus.{#SNMPINDEX}</snmpObject>
		      <mib>FOUNDRY-SN-AGENT-MIB</mib>
		      <discoveryRule>PSU Discovery</discoveryRule>
		      <alarmObject>{#SNMPVALUE}</alarmObject>
		      <valueMap>FOUNDRY-SN-AGENT-MIB::snChasPwrSupply2OperStatus</valueMap>
	    </sensor.psu.status>
 
	    
 	    <sensor.fan.status>
	    	  <oid>.1.3.6.1.4.1.1991.1.1.1.3.2.1.4.{#SNMPINDEX}</oid>
		      <snmpObject>snChasFan2OperStatus.{#SNMPINDEX}</snmpObject>
		      <mib>FOUNDRY-SN-AGENT-MIB</mib>
		      <discoveryRule>FAN Discovery</discoveryRule>
		      <alarmObject>{#SNMPVALUE}</alarmObject>
		      <valueMap>FOUNDRY-SN-AGENT-MIB::snChasFan2OperStatus</valueMap>
	    </sensor.fan.status>

 <!-- 	<system.hw.model>  
	    	  <oid>1.3.6.1.2.1.47.1.1.1.1.2.{#SNMPINDEX}</oid>
		      <snmpObject>entPhysicalDescr.{#SNMPINDEX}</snmpObject>
		      <mib>FOUNDRY-SN-AGENT-MIB</mib>	 
		      <discoveryRule>Entity Discovery</discoveryRule>	
	    </system.hw.model> -->
		
		<system.hw.serialnumber>
	    	  <oid>1.3.6.1.4.1.1991.1.1.1.1.2.0</oid>
		      <snmpObject>snChasSerNum.0</snmpObject>
		      <mib>FOUNDRY-SN-AGENT-MIB</mib>
	    </system.hw.serialnumber> 
	    
	    <system.hw.firmware>
	    	<oid>1.3.6.1.4.1.1991.1.1.2.1.11.0</oid>
	        <snmpObject>snAgImgVer.0</snmpObject>
		    <mib>FOUNDRY-SN-AGENT-MIB</mib>
		    <vendorDescription>The version of the running software in the form'major.minor.maintenance[letters]'</vendorDescription>
	    </system.hw.firmware>
	    
	   </metrics>
		<macros>
            <macro>
               <macro>{$TEMP_CRIT}</macro>
               <value>75</value>
            </macro>
            <macro>
               <macro>{$TEMP_WARN}</macro>
               <value>65</value>
            </macro>
              

              <macro>
                  <macro>{$PSU_CRIT_STATUS}</macro>
                  <value>3</value>
              </macro>
               <macro>
                  <macro>{$FAN_CRIT_STATUS}</macro>
                  <value>3</value>
                </macro>
		        <macro>
		            <macro>{$PSU_OK_STATUS}</macro>
		            <value>2</value> 
		        </macro>
		        <macro>
		            <macro>{$FAN_OK_STATUS}</macro>
		            <value>2</value> 
		        </macro>                  
		       <!--  1: other(1)
				2: normal(2)
				3: failure(3) -->
              </macros>	   
  </template>
      <value_maps>
	<value_map>
            <name>FOUNDRY-SN-AGENT-MIB::snChasPwrSupply2OperStatus</name>
            <mappings>
                <mapping>
                    <value>1</value>
                    <newvalue>other</newvalue>
                </mapping>
                <mapping>
                    <value>2</value>
                    <newvalue>normal</newvalue>
                </mapping>
                <mapping>
                    <value>3</value>
                    <newvalue>failure</newvalue>
                </mapping>
            </mappings>
        </value_map>	      
      
        <value_map>
            <name>FOUNDRY-SN-AGENT-MIB::snChasFan2OperStatus</name>
            <mappings>
                <mapping>
                    <value>1</value>
                    <newvalue>other</newvalue>
                </mapping>
                <mapping>
                    <value>2</value>
                    <newvalue>normal</newvalue>
                </mapping>
                <mapping>
                    <value>3</value>
                    <newvalue>failure</newvalue>
                </mapping>
            </mappings>
        </value_map>
    </value_maps>    
  </tns:root>
